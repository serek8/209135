\hypertarget{avltree_8h}{\subsection{avltree.\-h}
\label{avltree_8h}\index{avltree.\-h@{avltree.\-h}}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * avltree.h}
00003 \textcolor{comment}{ *}
00004 \textcolor{comment}{ *  Created on: May 20, 2015}
00005 \textcolor{comment}{ *      Author: serek8}
00006 \textcolor{comment}{ */}
00007 
00008 \textcolor{preprocessor}{#ifndef AVLTREE\_H\_}
00009 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define AVLTREE\_H\_}
00010 \textcolor{preprocessor}{}
00011 \textcolor{preprocessor}{#include <iostream>}
00012 \textcolor{preprocessor}{#include <iomanip>}
00013 \textcolor{preprocessor}{#include "\hyperlink{avltreeelement_8h}{avltreeelement.h}"}
00014 
00015 \textcolor{keyword}{using namespace }std;
00016 
00017 
00018 \textcolor{comment}{// Definicja klasy obsługującej drzewo AVL}
00019 \textcolor{comment}{//----------------------------------------}
00020 \textcolor{comment}{/*}
00021 \textcolor{comment}{ * @brief Definiuje obiekt drzewa AVL}
00022 \textcolor{comment}{ */}
00023 \textcolor{keyword}{template} <\textcolor{keyword}{class} ContentType>
\hypertarget{avltree_8h_source_l00024}{}\hyperlink{class_a_v_l_tree}{00024} \textcolor{keyword}{class }\hyperlink{class_a_v_l_tree}{AVLTree}
00025 \{
00026   \textcolor{keyword}{public}:
00027 
\hypertarget{avltree_8h_source_l00029}{}\hyperlink{class_a_v_l_tree_aee3daa1b05e59d770a95e1274f09eb22}{00029}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_aee3daa1b05e59d770a95e1274f09eb22}{rootNode};
00030 
00031 
00032 
\hypertarget{avltree_8h_source_l00033}{}\hyperlink{class_a_v_l_tree_ab2eeaf55f5521c4d9d0090b0ea74c92c}{00033}     \hyperlink{class_a_v_l_tree_ab2eeaf55f5521c4d9d0090b0ea74c92c}{AVLTree}()
00034     \{
00035       rootNode = NULL;
00036     \}
\hypertarget{avltree_8h_source_l00037}{}\hyperlink{class_a_v_l_tree_a51346b432823dce79badfd69e0a4236c}{00037}     \hyperlink{class_a_v_l_tree_a51346b432823dce79badfd69e0a4236c}{~AVLTree}()
00038     \{
00039       \textcolor{keywordflow}{while}(rootNode)
00040       \{
00041           \textcolor{keyword}{delete}(\textcolor{keyword}{remove}(rootNode));
00042       \}
00043     \}
00044 
00045     \textcolor{comment}{/*}
00046 \textcolor{comment}{     * @brief Wsadza klucz do drzewa}
00047 \textcolor{comment}{     * @param newkey klucz do wsadzenia}
00048 \textcolor{comment}{     */}
\hypertarget{avltree_8h_source_l00049}{}\hyperlink{class_a_v_l_tree_a3a85ff5f0b56af6c8b358611f8de95af}{00049}     \textcolor{keywordtype}{void} \hyperlink{class_a_v_l_tree_a3a85ff5f0b56af6c8b358611f8de95af}{insert}(\textcolor{keywordtype}{int} &newKey)
00050         \{
00051         \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>}* newNode = \textcolor{keyword}{new} 
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>}(newKey);
00052                 \textcolor{comment}{//AVLTreeNode<ContentType>  *newNode2 = new AVLTreeNode<ContentType>();}
00053           \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * searchingNode = rootNode,  \textcolor{comment}{// Wskaznik do
       przeszukania drzewa i znalezienia tego samego klucza}
00054                           * parentForNewNode = NULL,\textcolor{comment}{// parentForNewNode}
00055                           * grandpaNode;
00056 
00057           \textcolor{keywordflow}{while}(searchingNode)
00058           \{
00059             \textcolor{keywordflow}{if}(searchingNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} == newNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key}) \textcolor{comment}{// sprawdzam czy taki klucz juz istnieje}
00060             \{
00061               \textcolor{comment}{//delete n; // skoro istnieje to po co taki TODO: do zmiany}
00062 
00063               \textcolor{comment}{//cout    <<"Taki klucz juz istnieje !\(\backslash\)n";}
00064               return ;
00065             \}
00066             parentForNewNode = searchingNode;
00067             \textcolor{keywordflow}{if}(newNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} < searchingNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key}) searchingNode= searchingNode->
      \hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}; \textcolor{comment}{// przechodze w lewo czesc drzewa}
00068             \textcolor{keywordflow}{else} searchingNode = searchingNode->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};                             \textcolor{comment}{//
       przechodze w prawa czesc drzewa}
00069           \}
00070 
00071 
00072           \textcolor{comment}{// jezeli to jest pierwszy element to wpisuje go to root'a drzewa}
00073           \textcolor{keywordflow}{if}(!(newNode->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = parentForNewNode))
00074           \{
00075             rootNode = newNode;
00076             return ;
00077           \}
00078           \textcolor{comment}{// wybieram strone gałęzi na której ma byc element}
00079           \textcolor{keywordflow}{if}(newNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} < parentForNewNode->key) parentForNewNode->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = newNode;
00080           \textcolor{keywordflow}{else} parentForNewNode->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = newNode;
00081 
00082           \textcolor{comment}{//sprawdzam czy potrzebne są rotacje, jak nie to koniec ;-)}
00083           \textcolor{keywordflow}{if}(parentForNewNode->balanceFactor)
00084           \{
00085             parentForNewNode->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 0;
00086             return ;
00087           \}
00088 
00089 
00090           \textcolor{comment}{//parentForNewNode->balanceFactor = (parentForNewNode->leftNode == newNode) ? 1 : -1;}
00091           \textcolor{keywordflow}{if}(parentForNewNode->leftNode == newNode) parentForNewNode->balanceFactor= 1;
00092           \textcolor{keywordflow}{else}  parentForNewNode->balanceFactor = -1;
00093           grandpaNode = parentForNewNode->parentNode;
00094 
00095           \textcolor{comment}{// usatawiam balanceFactors na 1 przed dodaniem}
00096           \textcolor{comment}{// nowej gałęci oraz wyznaczam grandpaForNewNode od ktorego zaczynam rotacje}
00097           \textcolor{keywordflow}{while}(grandpaNode)
00098           \{
00099             \textcolor{keywordflow}{if}(grandpaNode->balanceFactor) \textcolor{keywordflow}{break}; \textcolor{comment}{// gdy byly juz wczesniej ustawione to przerwij}
00100 
00101             \textcolor{keywordflow}{if}(grandpaNode->leftNode == parentForNewNode) grandpaNode->balanceFactor = 1;
00102             \textcolor{keywordflow}{else} grandpaNode->balanceFactor = -1;
00103             parentForNewNode = grandpaNode; grandpaNode = grandpaNode->parentNode;
00104           \}
00105 
00106           \textcolor{comment}{// jesli do konca byly zbalansowane to przerwij}
00107           \textcolor{keywordflow}{if}(!grandpaNode) return ;
00108 
00109           \textcolor{comment}{//rotacje na podstawie balanceFactors}
00110           \textcolor{keywordflow}{if}(grandpaNode->balanceFactor == 1)
00111           \{
00112             \textcolor{keywordflow}{if}(grandpaNode->rightNode == parentForNewNode)
00113             \{
00114               grandpaNode->balanceFactor = 0;
00115               return ;
00116             \}
00117             \textcolor{keywordflow}{if}(parentForNewNode->balanceFactor == -1) rotationLR(grandpaNode); \textcolor{comment}{//Rotacja podwójna w
       lewo-prawo}
00118             \textcolor{keywordflow}{else} rotationLL(grandpaNode); \textcolor{comment}{// Rotacja pojedyncza w prawo}
00119             return ;
00120           \}
00121           \textcolor{keywordflow}{else}
00122           \{
00123             \textcolor{keywordflow}{if}(grandpaNode->leftNode == parentForNewNode)
00124             \{
00125               grandpaNode->balanceFactor = 0;
00126               return ;
00127             \}
00128             \textcolor{keywordflow}{if}(parentForNewNode->balanceFactor == 1) rotationRL(grandpaNode); \textcolor{comment}{//Rotacja podwójna w
       lewo-prawo}
00129             \textcolor{keywordflow}{else} rotationRR(grandpaNode); \textcolor{comment}{//Rotacja pojedyncza w lewo}
00130             return ;
00131           \}
00132         \}
00133 
00134     \textcolor{comment}{/*}
00135 \textcolor{comment}{     * @brief rotacja pojedyncza w lewo}
00136 \textcolor{comment}{     */}
\hypertarget{avltree_8h_source_l00137}{}\hyperlink{class_a_v_l_tree_a81a6d1f73184e06ad92861b6ec2f96d7}{00137}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_a81a6d1f73184e06ad92861b6ec2f96d7}{rotationRR}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * A)
00138     \{
00139       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * B = A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}, * P = A->
      \hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00140 
00141       A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = B->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00142       \textcolor{keywordflow}{if}(A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = A;
00143       B->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = A;
00144       B->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = P;
00145       A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B;
00146       \textcolor{keywordflow}{if}(P)
00147       \{
00148         \textcolor{keywordflow}{if}(P->leftNode == A) P->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = B; \textcolor{keywordflow}{else} P->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = B;
00149       \}
00150       \textcolor{keywordflow}{else} rootNode = B;
00151 
00152       \textcolor{keywordflow}{if}(B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == -1)
00153       \{
00154         A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 0;
00155       \}
00156       \textcolor{keywordflow}{else}
00157       \{
00158         A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = -1; B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 1;
00159       \}
00160       \textcolor{keywordflow}{return} B;
00161     \}
00162 
00163     \textcolor{comment}{/*}
00164 \textcolor{comment}{     * @brief rotacja pojedyncza w prawo}
00165 \textcolor{comment}{     */}
\hypertarget{avltree_8h_source_l00166}{}\hyperlink{class_a_v_l_tree_a1e0560fa0ca27be07971223df9639b03}{00166}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_a1e0560fa0ca27be07971223df9639b03}{rotationLL}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * A)
00167     \{
00168       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * B = A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}, * P = A->
      \hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00169 
00170       A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = B->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00171       \textcolor{keywordflow}{if}(A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}) A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = A;
00172       B->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = A;
00173       B->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = P;
00174       A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B;
00175       \textcolor{keywordflow}{if}(P)
00176       \{
00177         \textcolor{keywordflow}{if}(P->leftNode == A) P->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = B; \textcolor{keywordflow}{else} P->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = B;
00178       \}
00179       \textcolor{keywordflow}{else} rootNode = B;
00180 
00181       \textcolor{keywordflow}{if}(B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == 1)
00182       \{
00183         A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 0;
00184       \}
00185       \textcolor{keywordflow}{else}
00186       \{
00187         A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 1; B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = -1;
00188       \}
00189 
00190       \textcolor{keywordflow}{return} B;
00191     \}
00192     \textcolor{comment}{/*}
00193 \textcolor{comment}{     * @brief rotacja podwojna lewo prawo}
00194 \textcolor{comment}{     */}
\hypertarget{avltree_8h_source_l00195}{}\hyperlink{class_a_v_l_tree_aae2d0b03656204df27bebda84229b226}{00195}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_aae2d0b03656204df27bebda84229b226}{rotationRL}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * A)
00196     \{
00197       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * B = A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}, * C = B->
      \hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}, * P = A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00198 
00199       B->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = C->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00200       \textcolor{keywordflow}{if}(B->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}) B->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B;
00201       A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = C->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00202       \textcolor{keywordflow}{if}(A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) A->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = A;
00203       C->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = A;
00204       C->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = B;
00205       A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = C;
00206       C->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = P;
00207       \textcolor{keywordflow}{if}(P)
00208       \{
00209         \textcolor{keywordflow}{if}(P->leftNode == A) P->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = C; \textcolor{keywordflow}{else} P->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = C;
00210       \}
00211       \textcolor{keywordflow}{else} rootNode = C;
00212 
00213       A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = (C->balanceFactor == -1) ?  1 : 0;
00214       B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = (C->balanceFactor ==  1) ? -1 : 0;
00215       C->balanceFactor = 0;
00216 
00217       \textcolor{keywordflow}{return} C;
00218     \}
00219     \textcolor{comment}{/*}
00220 \textcolor{comment}{     * @brief rotacja podwojna lewo prawo}
00221 \textcolor{comment}{     */}
\hypertarget{avltree_8h_source_l00222}{}\hyperlink{class_a_v_l_tree_a5751bfd512b5dfe32060a649f697d5f0}{00222}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_a5751bfd512b5dfe32060a649f697d5f0}{rotationLR}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * A)
00223     \{
00224       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * B = A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}, * C = B->
      \hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}, * P = A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00225 
00226       B->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = C->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00227       \textcolor{keywordflow}{if}(B->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) B->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B;
00228       A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = C->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00229       \textcolor{keywordflow}{if}(A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}) A->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = A;
00230       C->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = A;
00231       C->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = B;
00232       A->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = B->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = C;
00233       C->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = P;
00234       \textcolor{keywordflow}{if}(P)
00235       \{
00236         \textcolor{keywordflow}{if}(P->leftNode == A) P->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = C; \textcolor{keywordflow}{else} P->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = C;
00237       \}
00238       \textcolor{keywordflow}{else} rootNode = C;
00239 
00240       A->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = (C->balanceFactor ==  1) ? -1 : 0;
00241       B->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = (C->balanceFactor == -1) ?  1 : 0;
00242       C->balanceFactor = 0;
00243 
00244       \textcolor{keywordflow}{return} C;
00245     \}
00246 
00249 
\hypertarget{avltree_8h_source_l00250}{}\hyperlink{class_a_v_l_tree_aee790e9dba096b0b8077602bccb0f2ca}{00250}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_aee790e9dba096b0b8077602bccb0f2ca}{find}(\textcolor{keywordtype}{int} key)
00251     \{
00252       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * tmpNode = rootNode;
00253 
00254       \textcolor{keywordflow}{while}((tmpNode) && (tmpNode->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} != key))
00255       \{
00256           \textcolor{keywordflow}{if}(key < tmpNode->key)         tmpNode = tmpNode->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00257           \textcolor{keywordflow}{else}                           tmpNode = tmpNode->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00258       \}
00259 
00260       \textcolor{keywordflow}{return} tmpNode;
00261     \}
00263 
\hypertarget{avltree_8h_source_l00264}{}\hyperlink{class_a_v_l_tree_a2e7405f8939b072489bb4ffd4521b374}{00264}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_a2e7405f8939b072489bb4ffd4521b374}{findMaxKeyNode}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * tmpNode)
00265     \{
00266       \textcolor{keywordflow}{while}(tmpNode->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) tmpNode = tmpNode->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00267       \textcolor{keywordflow}{return} tmpNode;
00268     \}
00269 
\hypertarget{avltree_8h_source_l00271}{}\hyperlink{class_a_v_l_tree_aa776fe15518d516032ca6d4522d77b02}{00271}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \hyperlink{class_a_v_l_tree_aa776fe15518d516032ca6d4522d77b02}{findAtherNodeMatch}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * nodeComperator)
00272     \{
00273       \textcolor{keywordflow}{if}(nodeComperator->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}) \textcolor{keywordflow}{return} findMaxKeyNode(nodeComperator->
      \hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode});
00274 
00275       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * y;
00276 
00277       \textcolor{keywordflow}{do}
00278       \{
00279         y = nodeComperator;
00280         nodeComperator = nodeComperator->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00281       \} \textcolor{keywordflow}{while}(nodeComperator && (nodeComperator->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} != y));
00282 
00283       \textcolor{keywordflow}{return} nodeComperator;
00284     \}
00285 
\hypertarget{avltree_8h_source_l00289}{}\hyperlink{class_a_v_l_tree_ac7e22bd9f8cba3cd9eb8aea97ba7b654}{00289}     \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * \textcolor{keyword}{remove}(
      \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * x)
00290     \{
00291       \hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * t, * y, * z;
00292       \textcolor{keywordtype}{bool} nest;
00293 
00294       \textcolor{comment}{// Jeśli węzeł x posiada dwójkę dzieci, lewego i prawego potomka:}
00295       \textcolor{keywordflow}{if}((x->leftNode) && (x->rightNode))
00296       \{
00297         y = \textcolor{keyword}{remove}(findAtherNodeMatch(x));
00298         \textcolor{comment}{//rekurencyjnie usuwamy y za pomocą tego samego algorytmu}
00299         nest = \textcolor{keyword}{false};
00300       \}
00301       \textcolor{comment}{//Jeśli węzeł x posiada tylko jedno dziecko lub nie posiada wcale dzieci:}
00302       \textcolor{keywordflow}{else}  \{
00303         \textcolor{keywordflow}{if}(x->leftNode) \{
00304           y = x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00305           x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} = NULL;
00306         \}
00307         \textcolor{keywordflow}{else} \{
00308           y = x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}; x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = NULL;
00309         \}
00310         x->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 0;
00311         nest = \textcolor{keyword}{true};
00312       \}
00313 
00314       \textcolor{keywordflow}{if}(y)  \{
00315         y->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = x->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00316         \textcolor{keywordflow}{if}(x->leftNode)
00317                 \{
00318                         y->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}  = x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00319                         y->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode}  = y;
00320                 \}
00321         \textcolor{keywordflow}{if}(x->rightNode)
00322                 \{
00323                         y->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode};
00324                         y->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode} = y;
00325                 \}
00326         y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = x->balanceFactor;
00327       \}
00328 
00329       \textcolor{keywordflow}{if}(x->parentNode)   \{
00330         \textcolor{keywordflow}{if}(x->parentNode->leftNode == x) x->parentNode->leftNode = y; \textcolor{keywordflow}{else} x->
      \hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode}->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} = y;
00331       \}
00332       \textcolor{keywordflow}{else} rootNode = y;
00333 
00334       \textcolor{keywordflow}{if}(nest)  \{
00335         z = y;
00336         y = x->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00337         \textcolor{keywordflow}{while}(y)
00338         \{
00339                 \textcolor{comment}{// węzeł y był w stanie równowagi przed usunięciem węzła x w jednym z jego poddrzew.}
00340           \textcolor{keywordflow}{if}(!(y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor})) \{
00341             y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = (y->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} == z) ? -1 : 1;
00342             \textcolor{keywordflow}{break};
00343           \}
00344           \textcolor{keywordflow}{else} \{
00345                 \textcolor{comment}{//skrócone zostało cięższe poddrzewo}
00346             \textcolor{keywordflow}{if}          (((y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} ==  1) &&
00347                         (y->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode}  == z)) || ((y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == -1) &&
00348                         (y->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} == z))) \{
00349               y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} = 0;
00350               z = y; y = y->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00351             \}
00352             \textcolor{keywordflow}{else} \{
00353               t = (y->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode} == z) ? y->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode} : y->
      \hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode};
00354 
00355               \textcolor{comment}{//Wykonujemy odpowiednią rotację pojedynczą}
00356               \textcolor{keywordflow}{if}(!(t->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor})) \{
00357                 \textcolor{keywordflow}{if}(y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == 1) rotationLL(y); \textcolor{keywordflow}{else} rotationRR(y);
00358                 \textcolor{keywordflow}{break};
00359               \}
00360               \textcolor{comment}{//Wykonujemy odpowiednią rotację pojedynczą}
00361               \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == t->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor})
00362               \{
00363                 \textcolor{keywordflow}{if}(y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == 1) rotationLL(y); \textcolor{keywordflow}{else} rotationRR(y);
00364                 z = t; y = t->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00365               \}
00366               \textcolor{comment}{//Wykonujemy rotację podwójną}
00367               \textcolor{keywordflow}{else}
00368               \{
00369                 \textcolor{keywordflow}{if}(y->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor} == 1) rotationLR(y); \textcolor{keywordflow}{else} rotationRL(y);
00370                 z = y->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode}; y = z->\hyperlink{class_a_v_l_tree_node_ae64d1261fea217d3e85928e7cf2a9151}{parentNode};
00371               \}
00372             \}
00373           \}
00374         \}
00375       \}
00376       \textcolor{keywordflow}{return} x;
00377     \}
\hypertarget{avltree_8h_source_l00378}{}\hyperlink{class_a_v_l_tree_ad440cb06acf157b57e161a797043aa8b}{00378}     \textcolor{keywordtype}{void}      \hyperlink{class_a_v_l_tree_ad440cb06acf157b57e161a797043aa8b}{print}()
00379     \{
00380         this->recurringPrint(this->rootNode);
00381     \}
\hypertarget{avltree_8h_source_l00382}{}\hyperlink{class_a_v_l_tree_a0440a3a88ac51df5191354562b58e375}{00382}     \textcolor{keywordtype}{void} \hyperlink{class_a_v_l_tree_a0440a3a88ac51df5191354562b58e375}{recurringPrint}(\hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * x)
00383     \{
00384       cout<< \textcolor{stringliteral}{"klucz:"}<< x->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} <<\textcolor{stringliteral}{"\(\backslash\)n"};
00385       \textcolor{keywordflow}{if}(x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode})  recurringPrint(x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode});
00386       \textcolor{keywordflow}{if}(x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) recurringPrint(x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode});
00387     \}
00388 
\hypertarget{avltree_8h_source_l00389}{}\hyperlink{class_a_v_l_tree_a6a2e6ca6bcdc814c246706f62150fe23}{00389}     \textcolor{keywordtype}{void} \hyperlink{class_a_v_l_tree_a6a2e6ca6bcdc814c246706f62150fe23}{print}(\hyperlink{class_a_v_l_tree_node}{AVLTreeNode<ContentType>} * x)
00390     \{
00391       cout << x->\hyperlink{class_a_v_l_tree_node_a717c2f6c33504a065570802e95189a57}{key} << \textcolor{stringliteral}{" : bf = "} << setw(2) << x->\hyperlink{class_a_v_l_tree_node_a212c57dab467b42c3ddc50b2aecc05ad}{balanceFactor};
00392       cout << endl;
00393       \textcolor{keywordflow}{if}(x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode})  print(x->\hyperlink{class_a_v_l_tree_node_afc53d4774f375c23795c9eb598f4d7cd}{leftNode});
00394       \textcolor{keywordflow}{if}(x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode}) print(x->\hyperlink{class_a_v_l_tree_node_a51dfb148f27625c89a3a153760517c38}{rightNode});
00395     \}
00396 \};
00397 
00398 
00399 
00400 
00401 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* AVLTREE\_H\_ */}\textcolor{preprocessor}{}
\end{DoxyCode}
